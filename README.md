# aquos-r-wifi-behavior
AQUOS R + Android 9 で起こる想定しないwifiの挙動についての再現project

Android Studioでプロジェクトを起動していただき、apkをビルドしてください。

## 再現環境
AQUOS SH-03J
Android 9

## 比較環境 (再現しない)
以下全てAndroid 9
- SONY Xperia G8188
- Galaxy 6S

## 現象の概要
0. 前提として「インターネットに接続できるWifiアクセスポイント(A)」「インターネットに疎通していないWifiアクセスポイント(B)」の2つが必要です
    - 弊社の実環境では「インターネットに疎通していないWifiアクセスポイント」は THETAというデジタルカメラにあたります
    - https://theta360.com/ja/about/theta/v.html
1. OSの設定でWifiアクセスポイント(A)に接続した状態にする
2. アプリ中でWifiアクセスポイント(B)に接続先を切り替える
    - 処理の詳細は、ソースコードをご覧ください
3. 接続先が切り替わったあとWifiアクセスポイント(B)の先にあるWebサーバーに対してhttpリクエストを投げると、直後にWIFIが別のアクセスポイントに切り替わってしまいリクエストが失敗する

## 再現の手順
1. このレポジトリのアプリをインストールしてください
2. まず、OSの設定でWifiアクセスポイント**(B)**に接続してください
3. アプリを立ち上げてください
4. "↓ COPY"をタップして、`SSID to connect`を入力してください
5. OSの設定でWifiアクセスポイント**(A)**に接続してください
6. アプリに戻り、`URL to GET request`に、Wifiアクセスポイント**(B)**の先にあり、叩くと成功するはずのURLを入力してください
    - アクセスが来ていることだけ確認できれば良いので、本物のWebサーバーが稼働している必要はないです
7. アプリに戻り、`Wifiを切り替える`をタップしてください
    - 上記現象が発生していることがlogで確認できます

※ 先にWifiアクセスポイント**(B)**に接続した状態からはじめると発生しません
